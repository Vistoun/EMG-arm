#include <Arduino.h>
#include <PololuMaestro.h>
#include <Wire.h>
#include <Adafruit_I2CDevice.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>
#include <Encoder.h>
#include "Arm.hpp"

/* On boards with a hardware serial port available for use, use
that port to communicate with the Maestro. For other boards,
create a SoftwareSerial object using pin D9 to receive (RX) and
pin D8 to transmit (TX). */

#ifdef SERIAL_PORT_HARDWARE_OPEN
  #define maestroSerial SERIAL_PORT_HARDWARE_OPEN
#else
  #include <SoftwareSerial.h>
  SoftwareSerial maestroSerial(9, 8);
#endif

#define PT(s) Serial.print(s)  //makes life easier
#define PTL(s) Serial.println(s)

#define DPT(s) display.print(s)
#define DPTL(s) display.println(s)
#define DSC(x,y) display.setCursor(x,y)

#define CURSOR(treshold) DSC(2, ((cursorPos - treshold) * 10) + 10); \
DPTL(">")

#define WRIST 0
#define THUMB 1
#define INDEX 2
#define MIDDLE 3
#define RING 4
#define PINKY 5

#define SCREEN_WIDTH 128 // OLED display width, in pixels
#define SCREEN_HEIGHT 64 // OLED display height, in pixels
#define OLED_ADDR   0x3C // OLED I2C address

#define CLK 2
#define DT 3
#define SW 4

#define SPEED 0 // 0 is fastest
#define ACCELERATION 0

#define OPEN 8000
#define CLOSE 3968

// '9f1a276ee240820d18e3e8771bc29d97', 45x50px
// '9f1a276ee240820d18e3e8771bc29d97', 30x30px
const unsigned char fist [] PROGMEM = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x92, 0x00, 0x00, 0x05, 0xb6, 0x00, 0x00, 
	0x0d, 0xb0, 0x00, 0x00, 0x0d, 0xb6, 0x00, 0x00, 0x0d, 0xb7, 0x80, 0x00, 0x04, 0x91, 0xc0, 0x00, 
	0x00, 0x0e, 0xc0, 0x00, 0x0f, 0xe0, 0xc0, 0x00, 0x0f, 0x81, 0xc0, 0x00, 0x0f, 0x3f, 0xc0, 0x00, 
	0x0f, 0xff, 0xc0, 0x00, 0x07, 0xff, 0x80, 0x00, 0x07, 0xff, 0x00, 0x00, 0x03, 0xfe, 0x00, 0x00, 
	0x03, 0xfc, 0x00, 0x00, 0x01, 0xfc, 0x00, 0x00, 0x01, 0xfc, 0x00, 0x00, 0x01, 0xfc, 0x00, 0x00, 
	0x01, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00
};

const unsigned char hand [] PROGMEM = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x01, 0xb6, 0x00, 0x00, 
	0x01, 0xb6, 0x00, 0x00, 0x01, 0xb6, 0x00, 0x00, 0x0d, 0xb6, 0x00, 0x00, 0x0d, 0xb6, 0x00, 0x00, 
	0x0d, 0xb6, 0x00, 0x00, 0x0d, 0xb6, 0x00, 0x00, 0x0d, 0xb6, 0x00, 0x00, 0x0f, 0xfe, 0x20, 0x00, 
	0x0f, 0xfe, 0x60, 0x00, 0x0f, 0xfc, 0x60, 0x00, 0x0f, 0xe1, 0xc0, 0x00, 0x0f, 0x9f, 0xc0, 0x00, 
	0x0f, 0x7f, 0x80, 0x00, 0x0f, 0xff, 0x00, 0x00, 0x0f, 0xfe, 0x00, 0x00, 0x07, 0xfc, 0x00, 0x00, 
	0x03, 0xf8, 0x00, 0x00, 0x03, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00
};

const unsigned char test [] PROGMEM = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x03, 0xf0, 0x00, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 
	0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x07, 0xc7, 0xf9, 0xf8, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 
	0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x0f, 0xf7, 0xfb, 0xfc, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 
	0x00, 0x00, 0x40, 0x00, 0x00, 0x0f, 0x9f, 0xf7, 0xfb, 0xfc, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 
	0x00, 0x01, 0x80, 0x00, 0x00, 0x1f, 0xdf, 0xf7, 0xfb, 0xfc, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 
	0x00, 0x02, 0x00, 0x00, 0x00, 0x1f, 0xdf, 0xf7, 0xfb, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 
	0x00, 0x0c, 0x00, 0x00, 0x00, 0x1f, 0xdf, 0xf7, 0xfb, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 
	0x00, 0x10, 0x00, 0x00, 0x00, 0x1f, 0xdf, 0xf7, 0xf0, 0xff, 0xc0, 0x00, 0x00, 0x00, 0x08, 0x00, 
	0x00, 0x20, 0x00, 0x00, 0x00, 0x1f, 0xdf, 0xf1, 0xff, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x04, 0x00, 
	0x00, 0x40, 0x00, 0x00, 0x00, 0x1f, 0xdf, 0xf0, 0xff, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x02, 0x00, 
	0x00, 0x80, 0x00, 0x00, 0x00, 0x5f, 0xdf, 0xf6, 0x3f, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x01, 0x00, 
	0x01, 0x00, 0x00, 0x00, 0x00, 0xdf, 0xdf, 0xf7, 0xc1, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x80, 
	0x02, 0x00, 0x00, 0x00, 0x00, 0xdf, 0xcf, 0xe3, 0xf3, 0xcf, 0xf8, 0x00, 0x00, 0x00, 0x00, 0xc0, 
	0x06, 0x00, 0x00, 0x00, 0x00, 0x5f, 0xc7, 0xdf, 0xfd, 0xef, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x40, 
	0x04, 0x00, 0x00, 0x00, 0x00, 0x6f, 0xbf, 0xff, 0xff, 0x07, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x20, 
	0x08, 0x00, 0x00, 0x00, 0x00, 0x7d, 0xff, 0xff, 0xfc, 0x7f, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x10, 
	0x08, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0xe3, 0xff, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x10, 
	0x10, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0xcf, 0xff, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x10, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0xbf, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x08, 
	0x10, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 0xff, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x08, 
	0x20, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x08, 
	0x20, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x04, 
	0x20, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0x80, 0x00, 0x00, 0x00, 0x00, 0x04, 
	0x20, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 
	0x20, 0x00, 0x00, 0x00, 0x00, 0x03, 0xff, 0xff, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 
	0x20, 0x00, 0x00, 0x00, 0x00, 0x03, 0xff, 0xff, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 
	0x20, 0x00, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xff, 0xff, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 
	0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 
	0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 
	0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 
	0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 
	0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 
	0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 
	0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 
	0x01, 0x00, 0x3f, 0xf1, 0xc0, 0x38, 0xff, 0xe0, 0x07, 0xfe, 0x3f, 0xfc, 0xe0, 0x0c, 0x01, 0x80, 
	0x00, 0x80, 0x30, 0x01, 0xe0, 0x79, 0x80, 0x00, 0x0c, 0x06, 0x30, 0x0c, 0xf0, 0x3c, 0x03, 0x00, 
	0x00, 0x40, 0x37, 0xe1, 0xf0, 0xf9, 0x8f, 0xe0, 0x18, 0x06, 0x30, 0x18, 0xf8, 0x7c, 0x06, 0x00, 
	0x00, 0x20, 0x30, 0x01, 0x99, 0x99, 0x80, 0x60, 0x1f, 0xfe, 0x33, 0xe0, 0xcc, 0xcc, 0x08, 0x00, 
	0x00, 0x08, 0x30, 0x01, 0x8f, 0x18, 0xc0, 0x60, 0x18, 0x06, 0x30, 0x70, 0xc7, 0x8c, 0x10, 0x00, 
	0x00, 0x04, 0x0f, 0xf1, 0x84, 0x10, 0x7f, 0xe0, 0x08, 0x02, 0x30, 0x18, 0x41, 0x04, 0x20, 0x00, 
	0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 
	0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 
	0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 
	0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 
	0x00, 0x00, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x01, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xf8, 0x3f, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};


bool settingServo = 0;
int currentMenu = 0;
int servoCon = 0;
int currentFinger = -1;
int maxMenuItems = 5; 
int minMenuItems = 1;
bool btnClick = 0;
long oldPosition  = 999;
int cursorPos = 1;
int servoPos = 0;
int value = 0;
uint8_t btnPrev;

MicroMaestro maestro(maestroSerial);

// Declaration for an SSD1306 display connected to I2C (SDA, SCL pins)
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, -1);

Arm ruka(WRIST,THUMB,INDEX,MIDDLE,RING,PINKY,SPEED,ACCELERATION,OPEN,CLOSE);

Encoder enc(CLK, DT);



void updateCursorPos(){
  cursorPos = enc.read() / 2;
  if(cursorPos >= maxMenuItems){
    cursorPos = maxMenuItems;
    enc.write(maxMenuItems*2);
  }
  else if(cursorPos <= minMenuItems){
    cursorPos = minMenuItems;
    enc.write(minMenuItems*2);
  }
}

void updateServoPos(){
  servoPos = enc.read() / 2;
  if (servoPos != oldPosition) { 
    if(oldPosition < servoPos ){
      servoCon >= OPEN ? servoCon = OPEN : servoCon += 200;
    } else if (oldPosition > servoPos){
      servoCon <= CLOSE ? servoCon = CLOSE : servoCon -= 200;
    }
    oldPosition = servoPos;
  }
}

  
void btnCheck(){
  uint8_t btnCurr = digitalRead(SW);
  btnClick = 0;

  if (btnCurr == LOW && btnPrev == HIGH){
    PTL("btn pressed");
    btnClick = 1;
  }

  btnPrev = digitalRead(SW);
}

void fingerMov(){
  if(settingServo == 1){
    switch(currentFinger){
      case 0:
      ruka.moveFinger(THUMB, servoCon);
      break;

      case 1:
      ruka.moveFinger(INDEX,servoCon);
      break;

      case 2:
      ruka.moveFinger(MIDDLE,servoCon);
      break;

      case 3:
      ruka.moveFinger(RING,servoCon);
      break;

      case 4:
      ruka.moveFinger(PINKY,servoCon);
      break;

      case 5:
      ruka.moveFinger(WRIST,servoCon);
      break;
    }
  }
}

void startScreen(){
    display.clearDisplay();
    display.setTextSize(2);

    DSC(10, 0);
    DPTL("EMG ARM");
    //---------------------------------
    display.setTextSize(1);

    DSC(10, 20);
    DPTL("Manual");

    DSC(10, 30);
    DPTL("EMG");

    DSC(10, 40);
    DPTL("Gesta");
    
    CURSOR(0);
    display.display();
  
}


void manualScreen(){
  display.clearDisplay();

  if(cursorPos < 5){
    DSC(10, 10);
    DPTL("THUMB");
    DSC(60,10);
    DPT(ruka.getThumbPos());
    
    DSC(10, 20);
    DPTL("INDEX");
    DSC(60,20);
    DPT(ruka.getIndexPos());

    DSC(10, 30);
    DPTL("MIDDLE");
    DSC(60, 30);
    DPT(ruka.getMiddlePos());

    DSC(10, 40);
    DPTL("RING");
    DSC(60, 40);
    DPT(ruka.getRingPos());

    DSC(10, 50);
    DPTL("PINKY");
    DSC(60, 50);
    DPT(ruka.getPinkyPos());

    CURSOR(0);
  }

  else if(cursorPos >= 5 ){
    DSC(10, 10);
    DPTL("WRIST");
    DSC(60, 10);
    DPT(ruka.getWristPos());

    DSC(10,20);
    DPTL("GO BACK"); 

    CURSOR(5);
  }

  display.display();
}

void gesturesScreen(){
  display.clearDisplay();
  

  if(cursorPos < 5){
    DSC(10, 0);
    DPTL("HAND");
    
    DSC(10, 10);
    DPTL("FIST");

    DSC(10,20);
    DPTL("ROCK AND ROLL");

    DSC(10,30);
    DPTL("OK");

    DSC(10,40);
    DPTL("V");

    DSC(10,50);
    DPTL("COUNTDOWN");
  }
  else if(cursorPos >= 5){
    
  }

  display.display();

}

void menuControl() {

/*
  currentMenu = 0 -> Main menu
  currentMenu = 1 -> Manual handel menu 
  currentMenu = 2 -> EMG senzor menu
  currentMenu = 3 -> Gestures menu
*/


  //Main menu
  if(currentMenu == 0){
    maxMenuItems = 3;
    minMenuItems = 1;
    if(btnClick == 1){
        switch (cursorPos){
        case 1:
          currentMenu = 1;
          break;

        case 2:
          currentMenu = 2;
          break;  

        case 3:
          currentMenu = 3;
          break;  
        } 
    }
    startScreen();
  }

  // Manual menu
  else if (currentMenu == 1){
    maxMenuItems = 6;
    minMenuItems = 0;
    if(btnClick == 1){
      settingServo != 1 ? settingServo = 1 : settingServo = 0;
      servoCon = 0;
      switch (cursorPos){
        case 0:
            currentFinger = 0;
            servoCon += ruka.getThumbPos();            
          break;

        case 1:        
            currentFinger = 1;
            servoCon += ruka.getIndexPos();                     
          break;  

        case 2:                   
            currentFinger = 2;
            servoCon += ruka.getMiddlePos();                   
          break;  
        
        case 3:                 
            currentFinger = 3;
            servoCon += ruka.getRingPos();                    
          break;  
        
        case 4:                       
            currentFinger = 4;
            servoCon += ruka.getPinkyPos();                    
          break;  
        
        case 5:       
            currentFinger = 5;
            servoCon += ruka.getWristPos();  
          break;  
        
        case 6:
          currentMenu = 0;
          settingServo = 0;
          break;  
          
        }
      enc.write(currentFinger*2);
    }
    manualScreen();
    fingerMov();
  }

  // EMG screen
  else if (currentMenu == 2){
    maxMenuItems = 6;
    minMenuItems = 0;
    if(btnClick == 1){
      switch (cursorPos){
        case 0:
        break;  
          
      }
    }
    
  }

  //Gestures screen
  else if (currentMenu == 3){
    maxMenuItems = 6;
    minMenuItems = 0;
    if(btnClick == 1){
      switch (cursorPos){
        case 0:
          ruka.openFist();
          break;

        case 1:
          ruka.closeFist();
          break;   
          
      }
    }
    gesturesScreen();
  }
  
}

void setup(){
  pinMode(SW, INPUT_PULLUP);
  btnPrev = digitalRead(SW);

  // Set the serial baud rate.     
  Serial.begin(9600);
  maestroSerial.begin(9600);
  
  if(!display.begin(SSD1306_SWITCHCAPVCC, OLED_ADDR)) { 
  Serial.println("SSD1306 allocation failed");
  for(;;); // Don't proceed, loop forever
  }
  display.clearDisplay();
  display.setTextColor(WHITE);
  display.drawBitmap(0, 0, test, 128, 64, WHITE);
  delay(1000);
  display.display();
  ruka.openFist();
}

void loop(){
  
  if(settingServo == 0){
    updateCursorPos();
  }
  else if(settingServo == 1){
    updateServoPos();
  }
    
  btnCheck();
  menuControl();
  

 //display.drawBitmap(0, 0, fist, 128, 64, WHITE);
}